# SpringBoot è°ƒè¯•ä¿¡æ¯æ¥æ”¶å™¨

## åŠŸèƒ½æ¦‚è¿°

æä¾›äº†ä¸‰ä¸ªä¸åŒå¤æ‚åº¦çš„SpringBootæ§åˆ¶å™¨æ¥æ¥æ”¶Androidç«¯ä¸ŠæŠ¥çš„è°ƒè¯•ä¿¡æ¯ï¼Œå¹¶æ ¼å¼åŒ–æ‰“å°åˆ°æ§åˆ¶å°å’Œæ—¥å¿—æ–‡ä»¶ã€‚

## æ§åˆ¶å™¨é€‰æ‹©

### 1. UltraSimpleDebugController (æ¨è)
- **ç‰¹ç‚¹**: æœ€ç®€å•ï¼Œç›´æ¥æ¥æ”¶JSONå­—ç¬¦ä¸²å¹¶æ ¼å¼åŒ–æ‰“å°
- **ä¼˜ç‚¹**: æ— éœ€å®šä¹‰ä»»ä½•å®ä½“ç±»ï¼Œä»£ç æœ€å°‘
- **é€‚ç”¨**: å¿«é€Ÿè°ƒè¯•ï¼Œåªéœ€è¦æŸ¥çœ‹JSONæ•°æ®

### 2. SimpleDebugInfoController
- **ç‰¹ç‚¹**: ä½¿ç”¨Mapæ¥æ”¶JSONæ•°æ®ï¼Œç»“æ„åŒ–æ‰“å°
- **ä¼˜ç‚¹**: ä»£ç ç®€æ´ï¼Œæ— éœ€å®šä¹‰å®ä½“ç±»
- **é€‚ç”¨**: éœ€è¦ç»“æ„åŒ–æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯

### 3. DebugInfoController
- **ç‰¹ç‚¹**: ä½¿ç”¨JsonNodeè§£æï¼Œè¯¦ç»†åˆ†ç±»æ‰“å°
- **ä¼˜ç‚¹**: ä¿¡æ¯åˆ†ç±»æ¸…æ™°ï¼Œä¾¿äºåˆ†æ
- **é€‚ç”¨**: éœ€è¦è¯¦ç»†åˆ†æè°ƒè¯•ä¿¡æ¯

## ä½¿ç”¨æ–¹æ³•

### 1. å¯åŠ¨æœåŠ¡
```bash
# ä½¿ç”¨Mavenå¯åŠ¨
mvn spring-boot:run

# æˆ–è€…æ‰“åŒ…åè¿è¡Œ
mvn clean package
java -jar target/debug-info-receiver-1.0.0.jar
```

### 2. æ¥å£åœ°å€
- **è°ƒè¯•ä¿¡æ¯ä¸ŠæŠ¥**: `POST http://localhost:5001/antiAddict/runLog`
- **å¥åº·æ£€æŸ¥**: `GET http://localhost:5001/antiAddict/health`

### 3. è¯·æ±‚æ ¼å¼
```json
{
  "timestamp": 1703123456789,
  "reportTime": "2023-12-21 10:30:56.789",
  "lastEventType": 32,
  "currentInterface": "target",
  "forceCheck": false,
  "currentApp": {
    "appName": "å¾®ä¿¡",
    "packageName": "com.tencent.mm",
    "className": "com.tencent.mm.ui.LauncherUI",
    "appState": "target"
  },
  "isFloatingWindowVisible": true
}
```

## æ—¥å¿—è¾“å‡ºç¤ºä¾‹

### UltraSimpleDebugController è¾“å‡º
```
==================================================================================
ğŸ“± è°ƒè¯•ä¿¡æ¯æ¥æ”¶æ—¶é—´: 2023-12-21 10:30:56.789
==================================================================================
ğŸ“‹ å®Œæ•´JSONæ•°æ®:
{
  "timestamp" : 1703123456789,
  "reportTime" : "2023-12-21 10:30:56.789",
  "lastEventType" : 32,
  "currentInterface" : "target",
  "forceCheck" : false,
  "currentApp" : {
    "appName" : "å¾®ä¿¡",
    "packageName" : "com.tencent.mm",
    "className" : "com.tencent.mm.ui.LauncherUI",
    "appState" : "target"
  },
  "isFloatingWindowVisible" : true
}
==================================================================================
ğŸ“Š è°ƒè¯•ä¿¡æ¯æ‰“å°å®Œæˆ
==================================================================================
```

### SimpleDebugInfoController è¾“å‡º
```
==================================================================================
ğŸ“± è°ƒè¯•ä¿¡æ¯æ¥æ”¶æ—¶é—´: 2023-12-21 10:30:56.789
==================================================================================
â° ä¸ŠæŠ¥æ—¶é—´æˆ³: 1703123456789
ğŸ“… ä¸ŠæŠ¥æ—¶é—´: 2023-12-21 10:30:56.789
--------------------------------------------------
ğŸ“¡ äº‹ä»¶ä¿¡æ¯:
   äº‹ä»¶ç±»å‹: 32
   äº‹ä»¶æ—¶é—´: 2023-12-21 10:30:56.000
   æ–‡æœ¬æ£€æµ‹æ—¶é—´: 2023-12-21 10:30:56.500
--------------------------------------------------
ğŸ”§ è°ƒè¯•æ—¶é—´æˆ³:
   h0: 2023-12-21 10:30:56.000 (1703123456000)
   h1: 2023-12-21 10:30:56.100 (1703123456100)
   h7: 2023-12-21 10:30:56.500 (1703123456500)
   h8: 2023-12-21 10:30:56.600 (1703123456600)
--------------------------------------------------
ğŸ–¥ï¸ ç•Œé¢çŠ¶æ€:
   å½“å‰ç•Œé¢: target
   å¼ºåˆ¶æ£€æŸ¥: false
--------------------------------------------------
ğŸ“± å½“å‰APPä¿¡æ¯:
   APPåç§°: å¾®ä¿¡
   åŒ…å: com.tencent.mm
   ç±»å: com.tencent.mm.ui.LauncherUI
   APPçŠ¶æ€: target
   éšè—æ—¶é—´: æ— 
   æ‰‹åŠ¨éšè—: false
--------------------------------------------------
ğŸªŸ æ‚¬æµ®çª—çŠ¶æ€: æ˜¾ç¤º
--------------------------------------------------
ğŸ“± è®¾å¤‡ä¿¡æ¯:
   å“ç‰Œ: Xiaomi
   å‹å·: Mi 10
   Androidç‰ˆæœ¬: 11
   åº”ç”¨ç‰ˆæœ¬: 1.0.0
==================================================================================
ğŸ“Š è°ƒè¯•ä¿¡æ¯æ‰“å°å®Œæˆ
==================================================================================
```

## é…ç½®æ–‡ä»¶è¯´æ˜

### application.yml
- **ç«¯å£**: 5001 (ä¸Androidç«¯é…ç½®ä¸€è‡´)
- **æ—¥å¿—çº§åˆ«**: INFO
- **æ—¥å¿—æ–‡ä»¶**: logs/debug-info.log
- **æ—¥å¿—è½®è½¬**: 10MB/æ–‡ä»¶ï¼Œä¿ç•™30å¤©

## éƒ¨ç½²å»ºè®®

### å¼€å‘ç¯å¢ƒ
ä½¿ç”¨ `UltraSimpleDebugController`ï¼Œå¿«é€ŸæŸ¥çœ‹JSONæ•°æ®ã€‚

### ç”Ÿäº§ç¯å¢ƒ
ä½¿ç”¨ `SimpleDebugInfoController` æˆ– `DebugInfoController`ï¼Œä¾¿äºæ—¥å¿—åˆ†æå’Œç›‘æ§ã€‚

## æ³¨æ„äº‹é¡¹

1. **ç«¯å£é…ç½®**: ç¡®ä¿5001ç«¯å£æœªè¢«å ç”¨
2. **æ—¥å¿—ç›®å½•**: ç¡®ä¿logsç›®å½•æœ‰å†™å…¥æƒé™
3. **å†…å­˜ä½¿ç”¨**: é•¿æ—¶é—´è¿è¡Œå»ºè®®ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µ
4. **ç½‘ç»œå®‰å…¨**: ç”Ÿäº§ç¯å¢ƒå»ºè®®é…ç½®é˜²ç«å¢™å’ŒHTTPS

## æ•…éšœæ’é™¤

### 1. ç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -an | grep 5001

# ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ç«¯å£
server:
  port: 5002
```

### 2. æ—¥å¿—æ–‡ä»¶æƒé™
```bash
# åˆ›å»ºæ—¥å¿—ç›®å½•
mkdir -p logs
chmod 755 logs
```

### 3. å†…å­˜ä¸è¶³
```bash
# å¢åŠ JVMå†…å­˜
java -Xmx512m -jar target/debug-info-receiver-1.0.0.jar
``` 