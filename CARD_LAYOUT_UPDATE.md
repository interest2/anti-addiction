# 卡片布局更新：监测开关和编辑图标

## 更新内容

### 1. 卡片布局调整
- **监测开关**：添加到卡片右上角
  - 绿色背景表示开启状态
  - 白色背景表示关闭状态
  - 控制当前APP是否被监测

- **编辑图标**：移动到卡片左上角
  - 使用系统编辑图标
  - 点击可编辑APP设置

### 2. 监测开关功能

#### 默认状态
- **小红书**：默认开启监测
- **其他APP**：默认关闭屏蔽

#### 功能说明
- 开启：无障碍服务会检测该APP的包名和内容
- 关闭：跳过该APP的检测，不会显示悬浮窗

#### 状态保存
- 开关状态保存在SharedPreferences中
- 重启应用后状态保持不变

### 3. 技术实现

#### 布局文件修改
- `item_app_card.xml`：使用RelativeLayout重新布局
- `toggle_switch_background.xml`：创建开关背景drawable

#### 适配器更新
- `AppCardAdapter.java`：添加监测开关和编辑图标支持
- 新增接口：`OnMonitorToggleListener`、`OnEditClickListener`

#### 设置管理
- `SettingsManager.java`：添加监测开关状态管理
- 方法：`isAppMonitoringEnabled()`、`setAppMonitoringEnabled()`、`shouldMonitorApp()`

#### 服务集成
- `FloatingAccessibilityService.java`：检测时检查开关状态
- 关闭屏蔽的APP不会被检测

### 4. 用户体验

#### 视觉设计
- 开关使用圆角矩形设计
- 绿色表示活跃状态，白色表示非活跃状态
- 编辑图标位于左上角，不干扰主要内容

#### 交互反馈
- 点击开关显示状态提示
- 编辑图标点击显示编辑提示
- 开关状态实时生效

### 5. 布局结构

```
┌─────────────────────────────────┐
│ ✏️                    [开关]     │
│                                 │
│         APP名称                  │
│                                 │
│      剩余时长: 00:00             │
│                                 │
│      宽松模式剩余: 3次               │
│                                 │
└─────────────────────────────────┘
```

### 6. 功能特点

- **选择性监测**：用户可以控制哪些APP被监测
- **状态持久化**：开关状态自动保存
- **实时生效**：开关状态立即影响监测行为
- **视觉清晰**：开关状态一目了然

### 7. 未来扩展

- 编辑功能的具体实现
- 批量开关操作
- 监测统计信息
- 自定义开关样式 